<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume Roaster</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    
    .fade-in {
      animation: fadeIn 0.8s ease-out forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    
    .pulse {
      animation: pulse 1.2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-neutral-950 via-zinc-900 to-red-950 flex items-center justify-center text-white">

  <div class="w-full max-w-xl bg-white/5 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/10 fade-in">

    
    <h1 class="text-3xl font-bold tracking-tight text-center">
      Resume Roaster
    </h1>
    <p class="text-center text-gray-400 mt-1">
      Honest. Brutal. Helpful.
    </p>

    
    <div class="mt-8">
      <label class="block text-sm mb-2 text-gray-300">
        Upload your resume (PDF)
      </label>

      <div
        class="relative border border-dashed border-white/20 rounded-xl p-4 hover:border-red-500 transition"
      >
        <input
          type="file"
          id="resume"
          accept="application/pdf"
          class="absolute inset-0 opacity-0 cursor-pointer"
        />
        <p class="text-center text-sm text-gray-400">
          Click to upload or drag & drop
        </p>
      </div>
    </div>

    
    <button
      id="roastBtn"
      class="w-full mt-6 py-3 rounded-xl bg-red-600 hover:bg-red-700 active:scale-95 transition font-semibold"
    >
      Roast my resume
    </button>

    <!-- Loading -->
    <p
      id="loading"
      class="hidden text-center mt-4 text-sm text-amber-400"
    >
      Analyzingâ€¦ finding weak points ðŸ‘€
    </p>

    
    <div
      id="result"
      class="hidden mt-6 border border-red-500/30 bg-black/40 rounded-xl p-5 fade-in"
    >
      <h2 class="text-red-400 font-semibold mb-2">
        Roast
      </h2>
      <p
        id="roastText"
        class="text-gray-200 leading-relaxed whitespace-pre-wrap"
      ></p>
    </div>

  </div>

  <script>
    const roastBtn = document.getElementById("roastBtn");
    const resumeInput = document.getElementById("resume");
    const loading = document.getElementById("loading");
    const result = document.getElementById("result");
    const roastText = document.getElementById("roastText");

    function typeText(text, element, speed = 20) {
      element.textContent = "";
      let i = 0;

      const interval = setInterval(() => {
        element.textContent += text[i];
        i++;
        if (i >= text.length) clearInterval(interval);
      }, speed);
    }

    roastBtn.addEventListener("click", async () => {
      const file = resumeInput.files[0];
      if (!file) {
        alert("Upload a PDF first.");
        return;
      }

      const formData = new FormData();
      formData.append("file", file);

      loading.classList.remove("hidden");
      roastBtn.classList.add("pulse");
      roastBtn.disabled = true;
      result.classList.add("hidden");

      try {
        const res = await fetch("https://resume-roaster-server.onrender.com/upload", {
          method: "POST",
          body: formData,
        });

        const data = await res.json();

        result.classList.remove("hidden");
        typeText(data.roast, roastText);
      } catch (e) {
        alert("Backend error. Check logs.");
      } finally {
        loading.classList.add("hidden");
        roastBtn.classList.remove("pulse");
        roastBtn.disabled = false;
      }
    });
  </script>

</body>
</html>

